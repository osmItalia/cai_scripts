{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='jquery.dataTables.min.css') }}">
{% endblock %}

{% block subtitle %}<h2>Regione {{ name|upper }}</h2>{% endblock %}

{% block routes %}
    <table id="osmtable" class="display" style="width:100%">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nome</th>
                <th>Codice</th>
                <th>Classificazione CAI</th>
                <th>From</th>
                <th>To</th>
                <th>Distance</th>
                <th>Symbol</th>
                <th>Tool</th>
            </tr>
        </thead>
    </table>
    <input type="button" value="Clear results" onclick="clearFilter()"/>
    <h2>Sezioni della regione</h2>
    <table id="sezioni" class="display">
    {% for section in codes %}
    	{% if section.id in exists %}
    	{% set codetext = '<a href="/sezioneroute/'+ section.id +'">'+ section.name +	'</a>' %}
    	{% else %}
    	{% set codetext = section.name %}
    	{% endif %}
	   {% if loop.first %}
	   <tr><td>{{ codetext|safe }}</td>
	   {% elif loop.last %}
	   <td>{{ codetext|safe }}</td></tr>
	   {% elif (loop.index0 % 4) == 0 %}
	   </tr><tr><td>{{ codetext|safe }}</td>
	   {% else %}
	   <td>{{ codetext|safe }}</td>
	   {% endif %}
    {% endfor %}
    
    </table>
{% endblock %}
{% block jsscript %}
  <script src="{{ url_for('static', filename='jquery.dataTables.min.js') }}"></script>
  <script>
    $(document).ready(function() {
	    $.ajaxSetup ({
		   // Disable caching of AJAX responses
		   cache: false
	    });
	    region_map('{{ name }}');
	    region_table('{{ name }}');
	 });
  </script>
{% endblock %}